<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
		xmlns:xlink="http://www.w3.org/1999/xlink"
		version="1.1"
		baseProfile="basic"
		width="100%" height="100%"
		viewBox="0 0 1000 1000"
		preserveAspectRatio="xMidYMid meet"
		clip-path="url(#clip-all)"
		id="display"
		>
	<title>#F00 Baron</title>
	<defs>
		<style type="text/css">
			<![CDATA[
				#background path {
					stroke: #000;
					stroke-width: 5;
					stroke-linecap: round;
					stroke-linejoin: miter;
				}
				#mountains path {
					fill: url(#pattern-mountain);
				}
				#hills path {
					fill: url(#pattern-hill);
				}
				#ground {
					fill: url(#pattern-ground);
					stroke: #000;
					stroke-width: 5;
				}
				
				.player1 {
					color: #f00;
				}
				.player2 {
					color: #ff0;
				}
				
				.template {
					display: none;
				}
			]]>
		</style>
	</defs>
	
	<script type="text/ecmascript" xlink:href="lib/jquery-1.7.1.js"></script>
	<script type="text/ecmascript" xlink:href="lib/jquery.svg.js"></script>
	<script type="text/ecmascript" xlink:href="lib/jquery.svgdom.js"></script>
	<script type="text/ecmascript" xlink:href="game.js"></script>
	<script type="text/ecmascript">
		//<![CDATA[
		// window..load because document..ready doesn't work for SVG
		jQuery(window).load(function() {
			// Init game
			var game = new f00baron.Game({
				 clouds: jQuery('#clouds .cloud')
				,explosion: jQuery('.explosion.template')
			});
			game.add_player({
				 element: jQuery('#player1')
				,controls: {
					// Player 1 - WSAD
					 87: 'engineOn'
					,83: 'engineOff'
					,65: 'rotateACW'
					,68: 'rotateCW'
					,32: 'fire' // Spacebar
					,18: 'fire' // alt
				}
				,scoreboard: jQuery('.player1.score')
			});
			game.add_player({
				 element: jQuery('#player2')
				,controls: {
					// Player 2 - up/down/left/right
					 38: 'engineOn'
					,40: 'engineOff'
					,37: 'rotateACW'
					,39: 'rotateCW'
					,17: 'fire' // ctrl (both)
					,96: 'fire' // Numpad 0
				}
				,scoreboard: jQuery('.player2.score')
			});
			
			// Start main loop
			game.start();
		});
		//]]>
	</script>
	
	<defs>
		<clipPath id="clip-all">
			<rect x="0" y="0" width="100%" height="100%" />
		</clipPath>
	</defs>
	
	<g id="background">
		<defs>
			<linearGradient id="pattern-sky"
					x1="0" y1="0"
					x2="0" y2="100%"
					>
				<stop offset="0" stop-color="#04f" />
				<stop offset="1" stop-color="#8cf" />
			</linearGradient>
			<linearGradient id="pattern-mountain"
					x1="0" y1="0"
					x2="0" y2="100%"
					>
				<stop offset="0" stop-color="#fff" />
				<stop offset="0.1" stop-color="#fff" />
				<stop offset="0.3" stop-color="#888" />
				<stop offset="1" stop-color="#444" />
			</linearGradient>
			<linearGradient id="pattern-hill"
					x1="0" y1="0"
					x2="0" y2="100%"
					>
				<stop offset="0" stop-color="#4c4" />
				<stop offset="1" stop-color="#080" />
			</linearGradient>
			<linearGradient id="pattern-ground"
					x1="0" y1="0"
					x2="0" y2="100%"
					>
				<stop offset="0" stop-color="#840" />
				<stop offset="1" stop-color="#420" />
			</linearGradient>
		</defs>
		
		<rect id="sky"
				x="0" y="0"
				width="100%" height="100%"
				fill="url(#pattern-sky)"
				/>
		
		<g id="help"
				font-family="sans" font-size="50"
				stroke="#000" stroke-width="2"
				fill="#f00"
				>
			<text x="500" y="100"
					text-anchor="middle"
					font-size="100" font-weight="bold"
					>#F00 Baron</text>
			<animate attributeType="CSS" attributeName="fill-opacity"
					from="1" to="0"
					begin="2s" dur="3s"
					fill="freeze"
					/>
			<animate id="anim_titleFade"
					attributeType="CSS" attributeName="stroke-opacity"
					from="1" to="0"
					begin="3s" dur="2.5s"
					fill="freeze"
					/>
		</g>
		
		<g id="scores" 
				font-family="sans" font-size="80" font-weight="bold"
				stroke="#000" stroke-width="2"
				opacity="0"
				>
			<text class="player1 score"
					x="20" y="80"
					text-anchor="start"
					fill="currentColor"
					>0</text>
			<text class="player2 score"
					x="980" y="80"
					text-anchor="end"
					fill="currentColor"
					>0</text>
			<animate attributeType="XML" attributeName="opacity"
					from="0" to="1"
					begin="anim_titleFade.end" dur="0.2s"
					fill="freeze"
					/>
		</g>
		<g id="mountains">
			<path d="M -300,950 l 350,-250 L 400,950" />
			<path d="M 200,950 l 300,-200 l 20,-30 l 50,-10 L 800,950" />
			<path d="M 500,950 l 200,-250 l 100,-60 l 50,20 l 100,10 L 1100,950" />
			<path d="M -150,950 l 350,-350 l 70,70 l 40,-20 l 80,100 L 550,950" />
		</g>
		<g id="hills">
			<path d="M 400,950 q 300,-200 600,0" />
			<path d="M 100,950 q 200,-300 400,0" />
			<path d="M -100,950 q 200,-200 400,0" />
			<path d="M 550,950 q 100,-100 200,0" />
			<path d="M 800,950 q 200,-200 400,0" />
		</g>
	</g>
	
	<g id="board">
		<svg id="player1"
				class="player1"
				x="50" y="935"
				overflow="visible">
			<g class="rotator" transform="rotate(-10)">
				<g class="sizer">
					<use xlink:href="planes.svg#plane-1"
							class="plane scaler"
							transform="scale(1.5)"
							/>
				</g>
				<svg class="bullet template"
						x="39" y="-6"
						overflow="visible"
						>
					<g class="sizer">
						<use xlink:href="planes.svg#bullet"
								class="scaler"
								transform="scale(2)"
								/>
					</g>
				</svg>
			</g>
		</svg>
		<svg id="player2"
				class="player2"
				x="950" y="935"
				overflow="visible">
			<g class="rotator" transform="rotate(190)">
				<g class="sizer">
					<use xlink:href="planes.svg#plane-1"
							class="plane scaler"
							transform="scale(1.5, -1.5)"
							/>
				</g>
				<svg class="bullet template"
						x="39" y="6"
						overflow="visible"
						>
					<g class="sizer">
						<use xlink:href="planes.svg#bullet"
								class="scaler"
								transform="scale(2)"
								/>
					</g>
				</svg>
			</g>
		</svg>
	</g>
	
	<g id="foreground">
		<defs>
			<svg class="explosion template"
					overflow="visible"
					fill="#fff"
					stroke="#000"
					stroke-width="1"
					stroke-linecap="round"
					stroke-linejoin="miter"
					>
				<g class="scaler" transform="scale(3)">
					<g class="cloud">
						<path d="M -17,0
								q -3,-7 4,-9
								q -1,-4 3,-5
								q 3,-4 8,-1
								q 4,-3 7,0
								q 6,-2 7,5
								q 5,0 4,6
								q 4,4 0,7
								q 2,5 -4,6
								q 0,6 -7,6
								q -3,3 -6,-1
								q -5,3 -7,-2
								q -3,0 -4,-3
								Q -20,5 -17,0
								Z"
								/>
						<path d="M 0,-9 q 4,-3 5,2"
								/>
						<path d="M 11,-1 q 3,2 -1,4 q 1,5 -4,4"
								/>
						<path d="M -10,-2 q -3,2 1,5 q -1,4 4,4 q 1,4 5,2"
								/>
						<animateTransform class="rotator"
								attributeType="XML" attributeName="transform"
								type="rotate"
								from="0" to="360"
								dur="60s" repeatCount="indefinite"
								/>
						<animateTransform
								attributeType="XML" attributeName="transform"
								type="scale" additive="sum"
								from="0" to="1" fill="freeze"
								begin="f00baron_start.begin" dur="0.2s"
								/>
					</g>
					<g class="explosion">
						<path d="M -20,-3 l
								10,-2  -3,-8  8,2
								 4,-7   3,7   7,-4
								-1,7   11,2  -7,5
								 7,8  -11,0   2,11
								-9,-7  -3,8  -4,-9
								-9,0    3,-7  Z"
								fill="#f00"
								>
							<animateTransform class="rotator"
									attributeType="XML" attributeName="transform"
									type="rotate"
									from="0" to="360" dur="60s"
									repeatCount="indefinite"
									/>
							<animateTransform class="anim-start"
									attributeType="XML" attributeName="transform"
									type="scale" additive="sum"
									from="0.5" to="1" fill="freeze"
									begin="indefinite" dur="0.1s"
									/>
							<animate
									attributeType="XML" attributeName="opacity"
									from="1" to="0" fill="freeze"
									begin="f00baron_start.end+0.2s" dur="0.5s"
									/>
						</path>
						<path d="M -4,0 l
								-3,-3  4,0   1,-4
								 3,3   3,-2  0,4
								 4,2  -3,2   1,3
								-4,0  -3,3  -1,-4
								-4,-1  Z"
								fill="#ff0"
								>
							<animateTransform class="rotator"
									attributeType="XML" attributeName="transform"
									type="rotate"
									from="360" to="0" dur="30s"
									repeatCount="indefinite"
									/>
							<animate
									attributeType="XML" attributeName="opacity"
									from="1" to="0" fill="freeze"
									begin="f00baron_start.end+0.2s" dur="0.2s"
									/>
						</path>
					</g>
					<animate class="anim-end"
							attributeType="XML" attributeName="opacity"
							from="1" to="0" fill="freeze"
							begin="f00baron_start.end+3s" dur="1s"
							/>
				</g>
			</svg>
		</defs>
		
		<g id="explosions">
		</g>
		<g id="clouds">
			<use xlink:href="clouds.svg#cloud-2"
					class="cloud"
					x="-1000"
					/>
			<use xlink:href="clouds.svg#cloud-2"
					class="cloud"
					x="-1000"
					/>
			<use xlink:href="clouds.svg#cloud-2"
					class="cloud"
					x="-1000"
					/>
		</g>
		
		<rect id="ground"
				x="0" y="950"
				width="100%" height="50"
				/>
	</g>
</svg>
